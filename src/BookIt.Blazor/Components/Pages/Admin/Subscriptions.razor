@page "/{tenantSlug}/admin/subscriptions"
@rendermode InteractiveServer
@layout BookIt.UI.Shared.Components.Admin.AdminLayout
@inject BookItAuthState Auth
@inject NavigationManager Nav

<PageTitle>Subscription — BookIt Admin</PageTitle>

@if (!Auth.IsAuthenticated)
{
    <MudText>Redirecting…</MudText>
}
else
{
    <BookIt.UI.Shared.Components.Admin.SubscriptionsView
        TenantSlug="@TenantSlug"
        CurrentPlan="SubscriptionPlan.Free"
        CurrentStatus="SubscriptionStatus.Trialing"
        TrialEndsAt="@DateTime.UtcNow.AddDays(14)" />
}

@code {
    [Parameter] public string TenantSlug { get; set; } = "";
    protected override void OnInitialized()
    {
        if (!Auth.IsAuthenticated)
            Nav.NavigateTo($"/login?returnUrl=/{TenantSlug}/admin/subscriptions");
    }
}
