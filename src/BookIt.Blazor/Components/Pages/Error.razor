@page "/Error"
@using System.Diagnostics

<PageTitle>Error — BookIt</PageTitle>

<main role="main" aria-labelledby="error-heading" style="max-width:600px;margin:4rem auto;padding:0 1.5rem;">
    <div style="text-align:center;margin-bottom:2rem;">
        <div style="font-size:3rem;" aria-hidden="true">⚠️</div>
        <h1 id="error-heading" style="color:#e17055;font-size:1.75rem;font-weight:800;margin:.5rem 0 .25rem;">
            Something went wrong
        </h1>
        <p style="color:#636e72;margin:0;">
            An unexpected error occurred while processing your request.
        </p>
    </div>

    @if (ShowRequestId)
    {
        <p style="font-size:.85rem;color:#636e72;text-align:center;">
            <strong>Request ID:</strong> <code style="background:#f0f0f0;padding:.1rem .35rem;border-radius:4px;">@RequestId</code>
        </p>
    }

    <div style="background:#fff8f8;border:1px solid #fab1a0;border-radius:10px;padding:1.25rem 1.5rem;margin-top:1.5rem;"
         role="note" aria-label="Troubleshooting advice">
        <p style="margin:0 0 .5rem;font-weight:600;color:#d63031;">What can you do?</p>
        <ul style="margin:0;padding-left:1.25rem;color:#4a4a4a;line-height:1.7;">
            <li>Refresh the page and try again.</li>
            <li>If the problem persists, please contact support.</li>
            <li>Administrators can enable the <strong>Development</strong> environment
                (set <code>ASPNETCORE_ENVIRONMENT=Development</code>) for detailed diagnostics.</li>
        </ul>
    </div>

    <div style="text-align:center;margin-top:1.75rem;">
        <a href="/" style="display:inline-block;background:#6c5ce7;color:white;padding:.6rem 1.5rem;
                           border-radius:8px;text-decoration:none;font-weight:600;font-size:.9rem;"
           aria-label="Return to the home page">
            Return home
        </a>
    </div>
</main>

@code {
    [CascadingParameter]
    private HttpContext? HttpContext { get; set; }

    private string? RequestId { get; set; }
    private bool ShowRequestId => !string.IsNullOrEmpty(RequestId);

    protected override void OnInitialized() =>
        RequestId = Activity.Current?.Id ?? HttpContext?.TraceIdentifier;
}
